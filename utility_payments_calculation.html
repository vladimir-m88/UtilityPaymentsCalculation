<style>
    .utility-payments-calculation-main {
        line-height: 125%;
    }

        .utility-payments-calculation-main .average-income,
        .utility-payments-calculation-main .output-block-income,
        .utility-payments-calculation-main .output-block-percent,
        .utility-payments-calculation-main .output-block-money {
            width: 125px;
        }

            .utility-payments-calculation-main .average-income,
            .utility-payments-calculation-main .output-block-percent:not(.in-expression),
            .utility-payments-calculation-main .output-block-money {
                line-height: 95%;
            }

        .utility-payments-calculation-main .block-title {
            text-align: center;
        }

        .utility-payments-calculation-main .bold {
            font-weight: bold;
        }

        .utility-payments-calculation-main .average-income {
            border: 3px solid blue;
            padding-left: 5px;
        }

        .utility-payments-calculation-main .output-block-percent {
            display: inline-block;
            border: 3px solid green;
            padding-left: 5px;
        }

            .utility-payments-calculation-main .output-block-percent.in-expression {
                border: none;
                border-bottom: 3px solid green;
            }

        .utility-payments-calculation-main .output-block-income {
            display: inline-block;
            border-bottom: 3px solid blue;
            padding-left: 5px;
        }

        .utility-payments-calculation-main .output-block-money {
            display: inline-block;
            border: 3px solid orange;
            padding-left: 5px;
        }

        .utility-payments-calculation-main .error-message {
            margin: -15px auto;
            color: red;
        }

            .utility-payments-calculation-main .error-message.information {
                color: blue;
            }

        .utility-payments-calculation-main .calculation-explanations ul > li {
            list-style-type: none;
        }

            .utility-payments-calculation-main .calculation-explanations ul > li:before {
                content: "— ";
            }

        .utility-payments-calculation-main .calculation-explanations .calculation-example {
            padding-left: 35px;
        }

        .utility-payments-calculation-main .main-column {
            width: 60%;
            margin: auto;
        }

        .utility-payments-calculation-main .input-output-block {
            border: 2px solid #99b3ff;
            padding: 20px;
        }
</style>

<!--Подключение jQuery. Используется для отладки. На сайте jQuery уже должна быть подключена,
    поэтому, перед размещением на сайте, эту часть нужно удалить.-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<!--Подключение jQuery. Конец.-->

<script>
    (function () {
        // Обработчик события готовности DOM.
        $(document).ready(function () {
            // Создаем объект для хранения информации сообщений об ошибках.
            var message = {
                notNumber: "Введене вами значення не є числом. Необхідно вводити додатне число.",
                negativeNumber: "Ви ввели негативне число або 0. Необхідно вводити додатне число.",
                subsidyUnavailable: "Можливість отримання субсидії відсутня.",
                htmlElementSelector: ".utility-payments-calculation-main #error_message",
                informationClass: "information",
                htmlElementInitHtml: "&nbsp;",
            }
            // Селекторы элементов ввода значений пользователем.
            var htmlInputSelector = {
                income: ".utility-payments-calculation-main #average_income",
            }
            // Селекторы элементов в которые производится вывод.
            var htmlOutSelector = {
                income: ".utility-payments-calculation-main .output-block-income",
                percent: ".utility-payments-calculation-main .output-block-percent",
                money: ".utility-payments-calculation-main .output-block-money",
            }
            // Очищаем поле ввода значения.
            $(htmlInputSelector.income).val("");
            // Обработка ввода значения пользователем.
            $(htmlInputSelector.income).change(function () {
                // Очищаем сообщение об ошибке. И удаляем класс информативного сообщения.
                $(message.htmlElementSelector).html(message.htmlElementInitHtml);
                $(message.htmlElementSelector).removeClass(message.informationClass);
                // Очищаем поля вывода значений.
                for (var key in htmlOutSelector) {
                    if (typeof htmlOutSelector[key] == "string") {
                        $(htmlOutSelector[key]).html("&nbsp;");
                    }
                }
                // Считываем введенное пользователем значение.
                var income = Number($(this).val());
                // Производим расчеты и выводим результаты.
                Calculate(income, htmlOutSelector, message);
            });
        });

        // Функция, котрая производит расчет на основании введенного пользователем значения
        // и выводит результат.
        function Calculate(income, htmlOutSelector, message) {
            // Если введено положительное число, то производим расчет и выводим результат.
            // Иначе выдаем сообщение с описанием ошибки.
            if (!isNaN(income)) {
                if (income > 0) {
                    // Введено корректное значение. Производим расчет.
                    var outPercent = income / 1399.0 / 2.0 * 15.0;
                    // Если процент платежа менее 100 %, то выводим результаты.
                    // Иначе выводим сообщение, что субсидия не положена.
                    if (outPercent < 100.0) {
                        // Округляем до 2го знака после запятой.
                        outPercent = Math.round(outPercent * 100) / 100;
                        // Выводим результат
                        $(htmlOutSelector.income).html(income.toFixed(2));
                        $(htmlOutSelector.percent).html(outPercent.toFixed(2));
                        $(htmlOutSelector.money).html(((outPercent / 100.0) * income).toFixed(2));
                    } else {
                        $(message.htmlElementSelector).addClass(message.informationClass);
                        $(message.htmlElementSelector).html(message.subsidyUnavailable);
                    }
                } else {
                    $(message.htmlElementSelector).html(message.negativeNumber);
                }
            } else {
                $(message.htmlElementSelector).html(message.notNumber);
            }
        }
    })();
</script>

<div class="utility-payments-calculation-main">
    <div class="main-column">
        <h3 class="block-title">РОЗРАХУНОК РОЗМІРУ ОБОВ’ЯЗКОВОЇ СУМИ ПЛАТЕЖУ ЗА КОМУНАЛЬНІ ПОСЛУГИ ДЛЯ ВАШОЇ РОДИНИ</h3>
        <div class="input-output-block">
            <h5>Для розрахунку введіть:</h5>
            <div>
                Розмір середньомісячного  доходу всіх осіб, які проживають
                у кватирі (будинку) за попередній календарний рік
                <input />
            </div>
            <div>
                Чисельність осіб, які зареєстровані у кватирі (будинку)
                <input />
            </div>
        </div>
        <!--<p>
            Для розрахунку максимально можливої суми платежу за комунальні послуги
            у синьому прямокутнику введіть розмір середньомісячного сукупного доходу сім’ї
            на одну особу за попередній календарний рік
            <input type="text" id="average_income" class="average-income" />.
        </p>
        <div id="error_message" class="error-message">&nbsp;</div>
        <ol>
            <li>
                Ваш обов`язковий відсоток платежу за комунальні послуги становить:
                <div class="output-block-income">&nbsp;</div>
                : 1399 : 2 * 15 % = <div class="output-block-percent">&nbsp;</div> %.
            </li>
            <li>
                Максимальна сума платежу за комунальні послуги має бути  не більше ніж:
                <div class="output-block-percent in-expression">&nbsp;</div> % *
                <div class="output-block-income">&nbsp;</div> грн. =
                <div class="output-block-money">&nbsp;</div> грн.
            </li>
        </ol>
        <p class="bold">
            Якщо Ваші щомісячні витрати на комунальні послуги вище розрахованої максимальної суми платежу, рекомендуємо
            <a href="http://marsovet.org.ua/articles/show/menu/2108">звернутися до районного управління соціального захисту</a>
            для отримання більш детальної інформації та оформлення субсидії.
        </p>
        <div class="calculation-explanations">
            <p>
                Пояснення щодо розрахунку:
            </p>
            <ul>
                <li>
                    Приклад розрахунку середньомісячного сукупного доходу сім’ї за попередній календарний рік
                    на одну особу.
                    <div class="calculation-example">
                        Наприклад, доходи членів сім’і  за попередній  рік становили:
                        <ol>
                            <li>пенсія бабусі – 10 000 грн;</li>
                            <li>зарплата батька – 50 000 грн;</li>
                            <li>допомога, що отримує мама на дитину – 12 000 грн;</li>
                            <li>дитина 3-х років – не отримує дохід.</li>
                        </ol>
                        Виходячи з цього сукупний дохід за минулий рік складає: 10 000 + 50 000 + 12 000 = 72 000 грн.
                        Середньомісячний сукупний дохід сім’ї на одну особу складає
                        <div style="display: inline-block;">72 000 / 4 / 12 = 1 500 грн.</div>
                    </div>
                </li>
                <li>
                    1399 – прожитковий мінімум на одну особу на місяць
                    (з 1 травня 2016 р.– 1 399 грн., з 1 грудня 2016 р. – 1 496 грн.);
                </li>
                <li>
                    2 – базовий коефіцієнт доходу для призначення субсидії;
                </li>
                <li>
                    15 – базова норма плати за житлово-комунальні послуги (%).
                </li>
            </ul>
        </div>
        <p>
            <a href="http://marsovet.org.ua/articles/show/menu/2108">Детальніше про оформлення субсидій >></a>
        </p>-->
    </div>
</div>