<style>
    .utility-payments-calculation-main .block-title {
        text-align: center;
    }

    .utility-payments-calculation-main .bold {
        font-weight: bold;
    }

    .utility-payments-calculation-main input {
        border: 3px solid blue;
        width: 125px;
        padding-left: 5px;
    }

    .utility-payments-calculation-main .output-block-percent {
        display: inline-block;
        border: 3px solid green;
        width: 125px;
        padding-left: 5px;
    }

        .utility-payments-calculation-main .output-block-percent.in-expression {
            border: none;
            border-bottom: 3px solid green;
        }

    .utility-payments-calculation-main .output-block-income {
        display: inline-block;
        border-bottom: 3px solid blue;
        width: 125px;
        padding-left: 5px;
    }

    .utility-payments-calculation-main .output-block-money {
        display: inline-block;
        border: 3px solid orange;
        width: 125px;
        padding-left: 5px;
    }

    .utility-payments-calculation-main .error-message {
        margin-top: 10px;
        color: red;
    }

    .utility-payments-calculation-main .calculation-explanations ul li {
        list-style-type: none;
    }

        .utility-payments-calculation-main .calculation-explanations ul li:before {
            content: "— ";
        }
</style>

<!--Подключение jQuery. Используется для отладки. На сайте jQuery уже должна быть подключена,
    поэтому, перед размещением на сайте, эту часть нужно удалить.-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!--Подключение jQuery. Конец.-->

<script>
    $(document).ready(function () {
        // Создаем объект для хранения информации сообщений об ошибках.
        var message = {
            notNumber: "Введене вами значення не є числом. Необхідно вводити додатне число.",
            negativeNumber: "Ви ввели негативне число або 0. Необхідно вводити додатне число.",
            htmlElementSelector: ".utility-payments-calculation-main #error_message",
            htmlElementInitHtml: "&nbsp;"
        }
        // Селекторы элементов ввода значений пользователем.
        var htmlInputSelector = {
            income: ".utility-payments-calculation-main #average_income",
        }
        // Селекторы элементов в которые производится вывод.
        var htmlOutSelector = {
            income: ".utility-payments-calculation-main .output-block-income",
            percent: ".utility-payments-calculation-main .output-block-percent",
            money: ".utility-payments-calculation-main .output-block-money",
        }
        // Очищаем поле ввода значения.
        $(htmlInputSelector.income).val("");
        // Обработка ввода значения пользователем.
        $(htmlInputSelector.income).on("change", function () {
            // Очищаем сообщение об ошибке.
            $(message.htmlElementSelector).html(message.htmlElementInitHtml);
            // Очищаем поля вывода значений.
            for (var key in htmlOutSelector) {
                if (typeof htmlOutSelector[key] == "string") {
                    $(htmlOutSelector[key]).html("&nbsp;");
                }
            }
            // Считываем введенное пользователем значение.
            var income = Number($(this).val());
            // Если введено положительное число, то производим расчет и выводим результат.
            // Иначе выдаем сообщение с описанием ошибки.
            if (!isNaN(income)) {
                if (income > 0) {
                    // Введено корректное значение. Производим расчет.
                    var outPercent = income / 1399.0 / 2.0 * 15.0;
                    // Выводим результат
                    $(htmlOutSelector.income).html(income.toFixed(2));
                    $(htmlOutSelector.percent).html(outPercent.toFixed(2));
                    $(htmlOutSelector.money).html(((outPercent / 100.0) * income).toFixed(2));
                } else {
                    $(message.htmlElementSelector).html(message.negativeNumber);
                }
            } else {
                $(message.htmlElementSelector).html(message.notNumber);
            }
        });
    });
</script>

<div class="utility-payments-calculation-main">
    <h3 class="block-title">РОЗРАХУНОК РОЗМІРУ ОБОВ’ЯЗКОВОЇ СУМИ ПЛАТЕЖУ ЗА КОМУНАЛЬНІ ПОСЛУГИ ДЛЯ ВАШОЇ РОДИНИ</h3>
    <p>
        Для розрахунку максимально можливої суми платежу за комунальні послуги
        у синьому прямокутнику введіть розмір середньомісячного сукупного доходу сім’ї
        на одну особу за попередній календарний рік
        <input type="text" id="average_income" />.
    </p>
    <ol>
        <li>
            Ваш обов`язковий відсоток платежу за комунальні послуги становить:
            <div class="output-block-income">&nbsp;</div>
            : 1399 : 2 * 15 % = <div class="output-block-percent">&nbsp;</div> %.
        </li>
        <li>
            Максимальна сума платежу за комунальні послуги має бути  не більше ніж:
            <div class="output-block-percent in-expression">&nbsp;</div> % *
            <div class="output-block-income">&nbsp;</div> грн. =
            <div class="output-block-money">&nbsp;</div> грн.
        </li>
        <li></li>
    </ol>
    <p class="bold">
        Якщо Ваші щомісячні витрати на комунальні послуги вище розрахованої максимальної суми платежу, рекомендуємо
        <a href="http://marsovet.org.ua/articles/show/menu/2108">звернутися до районного управління соціального захисту</a>
        для отримання більш детальної інформації та оформлення субсидії.
    </p>
    <div class="calculation-explanations">
        <p>
            Пояснення щодо розрахунку:
        </p>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <p>
        <a href="http://marsovet.org.ua/articles/show/menu/2108">Детальніше про оформлення субсидій >></a>
    </p>
    <!--<p>
        Підставте у синій прямокутник свій середньомісячний сукупний дохід сім’ї
        за попередній календарний рік на одну особу.
    </p>
    <div>
        <input type="text" id="average_income" />
        : 1399 : 2 x 15 = <div id="output_block_percent" class="output-block-percent">&nbsp;</div> %
    </div>
    <div id="error_message" class="error-message">
        &nbsp;
    </div>
    <p>
        У зеленому прямокутнику Ви отримаєте свій обов’язковий
        відсоток платежу за комунальні послуги.
        <ul>
            <li>
                1399 –  прожитковий мінімум на одну особу на місяць
                (з 1 січня 2016 – 1 330 грн.,  з 1 травня – 1 399 грн.,
                з 1 грудня – 1 496 грн.);
            </li>
            <li>2 – базовий коефіцієнт доходу для призначення субсидії;</li>
            <li>15 – базова норма плати за житлово-комунальні послуги (%).</li>
        </ul>
    </p>-->
</div>